# Workflow derived from https://github.com/r-lib/actions/tree/v2/examples
# Need help debugging build failures? Start at https://github.com/r-lib/actions#where-to-find-help
on:
  pull_request:
  push:
    # branches: [main, dev]
    paths-ignore:
      - '**.md'  # prevent md files (e.g., README.md) in any repo dir from trigering workflow
      - 'LICENSE'
      - '.gitignore'
      - '.gitattributes'
  workflow_dispatch:  # also allow manual trigger, for testing purposes


name: Test factor build

jobs:
  test-factors:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout repo
        uses: actions/checkout@v4
        with:
          fetch-depth: 0

      - uses: r-lib/actions/setup-pandoc@v2

      - uses: r-lib/actions/setup-r@v2

      - name: Install supporting packages
        run: |
          Rscript -e 'install.packages(c("knitr", "rmarkdown", "cli", "configr", "scales", "here", "devtools"))'

      - name: Build factors
        run: |
          Rscript -e 'rmarkdown::render(input = "CalculateEmissionFactors.Rmd")'
